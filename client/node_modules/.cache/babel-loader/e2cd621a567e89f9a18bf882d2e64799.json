{"ast":null,"code":"import _regeneratorRuntime from\"/Users/richard/Downloads/crypto-capsule/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/richard/Downloads/crypto-capsule/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/richard/Downloads/crypto-capsule/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/Users/richard/Downloads/crypto-capsule/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject;import React,{useState}from\"react\";import styled from\"styled-components\";import{updateBeneficiary}from\"../services/contracthelper\";import{ValidationError}from\"../styles/ValidationError\";import Popup from\"./Popup\";import TextInput from\"./TextInput\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var StyledUpdateBeneficiary=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  width: 100%;\\n\"])));var UpdateBeneficiary=function UpdateBeneficiary(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),beneficiary=_useState4[0],setBeneficiary=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),addressError=_useState6[0],setAddressError=_useState6[1];var validateAddress=function validateAddress(value){if(value.length!==42){setAddressError(\"Invalid Address\");return false;}setAddressError(\"\");return true;};var click=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(validateAddress(beneficiary)){_context.next=2;break;}return _context.abrupt(\"return\");case 2:setLoading(true);_context.next=5;return updateBeneficiary(props.capsuleId,beneficiary);case 5:props.updateCapsules();setLoading(false);props.close();case 8:case\"end\":return _context.stop();}}},_callee);}));return function click(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(Popup,{show:props.show,close:function close(){return props.close();},header:\"Update Beneficiary\",buttonText:\"Update\",buttonAction:function buttonAction(){click();},loading:loading,content:/*#__PURE__*/_jsxs(StyledUpdateBeneficiary,{children:[/*#__PURE__*/_jsx(TextInput,{label:\"New Beneficiary\",placeholder:\"e.g. 0x07d48BDBA7975f0DAF73BD5b85A2E3Ff87ffb24e\",tooltip:\"This is the new wallet address that the crypto will be sent to on the distribution date\",value:beneficiary,setValue:function setValue(value){validateAddress(value);setBeneficiary(value);}}),addressError&&/*#__PURE__*/_jsx(ValidationError,{children:addressError})]})});};export default UpdateBeneficiary;","map":{"version":3,"sources":["/Users/richard/Downloads/crypto-capsule/client/src/components/UpdateBeneficiary.tsx"],"names":["React","useState","styled","updateBeneficiary","ValidationError","Popup","TextInput","StyledUpdateBeneficiary","div","UpdateBeneficiary","props","loading","setLoading","beneficiary","setBeneficiary","addressError","setAddressError","validateAddress","value","length","click","capsuleId","updateCapsules","close","show"],"mappings":"qrBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,MAAOC,CAAAA,MAAP,KAAmB,mBAAnB,CACA,OAASC,iBAAT,KAAkC,4BAAlC,CACA,OAASC,eAAT,KAAgC,2BAAhC,CACA,MAAOC,CAAAA,KAAP,KAAkB,SAAlB,CACA,MAAOC,CAAAA,SAAP,KAAsB,aAAtB,C,wFAEA,GAAMC,CAAAA,uBAAuB,CAAGL,MAAM,CAACM,GAAV,mFAA7B,CAWA,GAAMC,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,CAACC,KAAD,CAA+B,eACzBT,QAAQ,CAAC,KAAD,CADiB,wCAChDU,OADgD,eACvCC,UADuC,8BAEjBX,QAAQ,CAAC,EAAD,CAFS,yCAEhDY,WAFgD,eAEnCC,cAFmC,8BAGfb,QAAQ,CAAC,EAAD,CAHO,yCAGhDc,YAHgD,eAGlCC,eAHkC,eAKvD,GAAMC,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACC,KAAD,CAA4B,CAClD,GAAIA,KAAK,CAACC,MAAN,GAAiB,EAArB,CAAyB,CACvBH,eAAe,CAAC,iBAAD,CAAf,CACA,MAAO,MAAP,CACD,CACDA,eAAe,CAAC,EAAD,CAAf,CACA,MAAO,KAAP,CACD,CAPD,CASA,GAAMI,CAAAA,KAAK,0FAAG,sIACPH,eAAe,CAACJ,WAAD,CADR,iEAEZD,UAAU,CAAC,IAAD,CAAV,CAFY,sBAGNT,CAAAA,iBAAiB,CAACO,KAAK,CAACW,SAAP,CAAkBR,WAAlB,CAHX,QAIZH,KAAK,CAACY,cAAN,GACAV,UAAU,CAAC,KAAD,CAAV,CACAF,KAAK,CAACa,KAAN,GANY,sDAAH,kBAALH,CAAAA,KAAK,0CAAX,CASA,mBACE,KAAC,KAAD,EACE,IAAI,CAAEV,KAAK,CAACc,IADd,CAEE,KAAK,CAAE,uBAAMd,CAAAA,KAAK,CAACa,KAAN,EAAN,EAFT,CAGE,MAAM,CAAC,oBAHT,CAIE,UAAU,CAAC,QAJb,CAKE,YAAY,CAAE,uBAAM,CAClBH,KAAK,GACN,CAPH,CAQE,OAAO,CAAET,OARX,CASE,OAAO,cACL,MAAC,uBAAD,yBACE,KAAC,SAAD,EACE,KAAK,CAAC,iBADR,CAEE,WAAW,CAAC,iDAFd,CAGE,OAAO,CAAC,yFAHV,CAIE,KAAK,CAAEE,WAJT,CAKE,QAAQ,CAAE,kBAACK,KAAD,CAAmB,CAC3BD,eAAe,CAACC,KAAD,CAAf,CACAJ,cAAc,CAACI,KAAD,CAAd,CACD,CARH,EADF,CAWGH,YAAY,eAAI,KAAC,eAAD,WAAkBA,YAAlB,EAXnB,GAVJ,EADF,CA2BD,CAlDD,CAoDA,cAAeN,CAAAA,iBAAf","sourcesContent":["import React, { useState } from \"react\";\nimport styled from \"styled-components\";\nimport { updateBeneficiary } from \"../services/contracthelper\";\nimport { ValidationError } from \"../styles/ValidationError\";\nimport Popup from \"./Popup\";\nimport TextInput from \"./TextInput\";\n\nconst StyledUpdateBeneficiary = styled.div`\n  width: 100%;\n`;\n\ntype Props = {\n  show: boolean;\n  close: () => void;\n  capsuleId: number;\n  updateCapsules: () => void;\n};\n\nconst UpdateBeneficiary = (props: Props): JSX.Element => {\n  const [loading, setLoading] = useState(false);\n  const [beneficiary, setBeneficiary] = useState(\"\");\n  const [addressError, setAddressError] = useState(\"\");\n\n  const validateAddress = (value: string): boolean => {\n    if (value.length !== 42) {\n      setAddressError(\"Invalid Address\");\n      return false;\n    }\n    setAddressError(\"\");\n    return true;\n  };\n\n  const click = async () => {\n    if (!validateAddress(beneficiary)) return;\n    setLoading(true);\n    await updateBeneficiary(props.capsuleId, beneficiary);\n    props.updateCapsules();\n    setLoading(false);\n    props.close();\n  };\n\n  return (\n    <Popup\n      show={props.show}\n      close={() => props.close()}\n      header=\"Update Beneficiary\"\n      buttonText=\"Update\"\n      buttonAction={() => {\n        click();\n      }}\n      loading={loading}\n      content={\n        <StyledUpdateBeneficiary>\n          <TextInput\n            label=\"New Beneficiary\"\n            placeholder=\"e.g. 0x07d48BDBA7975f0DAF73BD5b85A2E3Ff87ffb24e\"\n            tooltip=\"This is the new wallet address that the crypto will be sent to on the distribution date\"\n            value={beneficiary}\n            setValue={(value: string) => {\n              validateAddress(value);\n              setBeneficiary(value);\n            }}\n          />\n          {addressError && <ValidationError>{addressError}</ValidationError>}\n        </StyledUpdateBeneficiary>\n      }\n    />\n  );\n};\n\nexport default UpdateBeneficiary;\n"]},"metadata":{},"sourceType":"module"}