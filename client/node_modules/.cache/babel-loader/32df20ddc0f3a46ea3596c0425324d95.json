{"ast":null,"code":"var _jsxFileName = \"/Users/richard/Documents/GitHub/time_sapsule/client/src/components/CapsuleOverview.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport styled from \"styled-components\";\nimport { openCapsule } from \"../services/contracthelper\";\nimport { selectAddress } from \"../state/userSlice\";\nimport capsuleOpen from \"../assets/capsule-open-large.png\";\nimport capsuleLocked from \"../assets/capsule-locked-large.png\";\nimport capsuleReady from \"../assets/capsule-ready-large.png\";\nimport Button from \"./Button\";\nimport { getCapsuleUsdValue } from \"../services/oracleService\";\nimport Countdown from \"./Countdown\";\nimport BlockContent from \"./BlockContent\";\nimport { getCanBeOpened } from \"../services/dateHelper\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst StyledCapsuleOverview = styled.div`\n  @media (max-width: 600px) {\n    margin-bottom: 6rem;\n  }\n`;\n_c = StyledCapsuleOverview;\nconst CapsuleImage = styled.img`\n  width: 40rem;\n  margin-bottom: 2rem;\n\n  @media (max-width: 600px) {\n    width: 100%;\n  }\n`;\n_c2 = CapsuleImage;\nconst Usd = styled.div`\n  font-size: 8rem;\n  margin-bottom: 2rem;\n  transform: rotate(-3deg);\n  color: var(--main);\n\n  @media (max-width: 600px) {\n    font-size: 6rem;\n  }\n`;\n_c3 = Usd;\nconst ProgressContainer = styled.div`\n  width: 100%;\n  height: 6rem;\n  background-color: var(--primary);\n`;\n_c4 = ProgressContainer;\n\nconst CapsuleOverview = props => {\n  _s();\n\n  const address = useSelector(selectAddress);\n  const [usd, setUsd] = useState(\"\");\n  const canBeOpened = getCanBeOpened(props.capsule);\n\n  const open = async () => {\n    await openCapsule(props.capsule.id);\n    props.update();\n  };\n\n  const getUsd = async _capsule => {\n    const usdValue = await getCapsuleUsdValue(_capsule);\n    setUsd(`$${Number(usdValue).toFixed(0).toLocaleString()}`);\n  };\n\n  useEffect(() => {\n    getUsd(props.capsule);\n  }, [props.capsule]);\n  return /*#__PURE__*/_jsxDEV(StyledCapsuleOverview, {\n    children: /*#__PURE__*/_jsxDEV(BlockContent, {\n      content: /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [usd && usd !== \"$0\" && /*#__PURE__*/_jsxDEV(Usd, {\n          children: usd\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 37\n        }, this), /*#__PURE__*/_jsxDEV(CapsuleImage, {\n          src: props.capsule.empty ? capsuleOpen : !canBeOpened ? capsuleLocked : capsuleReady,\n          alt: props.capsule.empty ? \"Capsule Empty Image\" : !canBeOpened ? \"Capsule Locked Image\" : \"Capsule Ready Image\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Countdown, {\n          capsule: props.capsule\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 13\n        }, this), false && /*#__PURE__*/_jsxDEV(ProgressContainer, {\n          children: \"meow\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 23\n        }, this), props.capsule.beneficiary === address && canBeOpened && !props.capsule.empty && /*#__PURE__*/_jsxDEV(Button, {\n          primary: true,\n          text: \"Open\",\n          click: () => open()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 5\n  }, this);\n};\n\n_s(CapsuleOverview, \"iknAB67LLhEtMso755Z6XhJMYIc=\", false, function () {\n  return [useSelector];\n});\n\n_c5 = CapsuleOverview;\nexport default CapsuleOverview;\n\nvar _c, _c2, _c3, _c4, _c5;\n\n$RefreshReg$(_c, \"StyledCapsuleOverview\");\n$RefreshReg$(_c2, \"CapsuleImage\");\n$RefreshReg$(_c3, \"Usd\");\n$RefreshReg$(_c4, \"ProgressContainer\");\n$RefreshReg$(_c5, \"CapsuleOverview\");","map":{"version":3,"sources":["/Users/richard/Documents/GitHub/time_sapsule/client/src/components/CapsuleOverview.tsx"],"names":["React","useEffect","useState","useSelector","styled","openCapsule","selectAddress","capsuleOpen","capsuleLocked","capsuleReady","Button","getCapsuleUsdValue","Countdown","BlockContent","getCanBeOpened","StyledCapsuleOverview","div","CapsuleImage","img","Usd","ProgressContainer","CapsuleOverview","props","address","usd","setUsd","canBeOpened","capsule","open","id","update","getUsd","_capsule","usdValue","Number","toFixed","toLocaleString","empty","beneficiary"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport styled from \"styled-components\";\n\nimport { openCapsule } from \"../services/contracthelper\";\nimport { selectAddress } from \"../state/userSlice\";\nimport CapsuleType from \"../types/CapsuleType\";\n\nimport capsuleOpen from \"../assets/capsule-open-large.png\";\nimport capsuleLocked from \"../assets/capsule-locked-large.png\";\nimport capsuleReady from \"../assets/capsule-ready-large.png\";\n\nimport Button from \"./Button\";\nimport { getCapsuleUsdValue } from \"../services/oracleService\";\nimport Countdown from \"./Countdown\";\nimport BlockContent from \"./BlockContent\";\nimport { getCanBeOpened } from \"../services/dateHelper\";\n\nconst StyledCapsuleOverview = styled.div`\n  @media (max-width: 600px) {\n    margin-bottom: 6rem;\n  }\n`;\n\nconst CapsuleImage = styled.img`\n  width: 40rem;\n  margin-bottom: 2rem;\n\n  @media (max-width: 600px) {\n    width: 100%;\n  }\n`;\n\nconst Usd = styled.div`\n  font-size: 8rem;\n  margin-bottom: 2rem;\n  transform: rotate(-3deg);\n  color: var(--main);\n\n  @media (max-width: 600px) {\n    font-size: 6rem;\n  }\n`;\n\nconst ProgressContainer = styled.div`\n  width: 100%;\n  height: 6rem;\n  background-color: var(--primary);\n`;\n\ntype Props = {\n  capsule: CapsuleType;\n  update: () => void;\n};\n\nconst CapsuleOverview = (props: Props): JSX.Element => {\n  const address = useSelector(selectAddress);\n\n  const [usd, setUsd] = useState<string>(\"\");\n\n  const canBeOpened = getCanBeOpened(props.capsule);\n\n  const open = async () => {\n    await openCapsule(props.capsule.id);\n    props.update();\n  };\n\n  const getUsd = async (_capsule: CapsuleType) => {\n    const usdValue = await getCapsuleUsdValue(_capsule);\n    setUsd(`$${Number(usdValue).toFixed(0).toLocaleString()}`);\n  };\n\n  useEffect(() => {\n    getUsd(props.capsule);\n  }, [props.capsule]);\n\n  return (\n    <StyledCapsuleOverview>\n      <BlockContent\n        content={\n          <>\n            {usd && usd !== \"$0\" && <Usd>{usd}</Usd>}\n            <CapsuleImage\n              src={\n                props.capsule.empty\n                  ? capsuleOpen\n                  : !canBeOpened\n                  ? capsuleLocked\n                  : capsuleReady\n              }\n              alt={\n                props.capsule.empty\n                  ? \"Capsule Empty Image\"\n                  : !canBeOpened\n                  ? \"Capsule Locked Image\"\n                  : \"Capsule Ready Image\"\n              }\n            />\n            <Countdown capsule={props.capsule} />\n            {false && <ProgressContainer>meow</ProgressContainer>}\n            {props.capsule.beneficiary === address &&\n              canBeOpened &&\n              !props.capsule.empty && (\n                <Button primary text=\"Open\" click={() => open()} />\n              )}\n          </>\n        }\n      />\n    </StyledCapsuleOverview>\n  );\n};\n\nexport default CapsuleOverview;\n"]},"metadata":{},"sourceType":"module"}