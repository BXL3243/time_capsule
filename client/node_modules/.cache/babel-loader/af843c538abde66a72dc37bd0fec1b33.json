{"ast":null,"code":"import _regeneratorRuntime from\"/Users/richard/Documents/GitHub/time_sapsule/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/richard/Documents/GitHub/time_sapsule/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/richard/Documents/GitHub/time_sapsule/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/Users/richard/Documents/GitHub/time_sapsule/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5,_templateObject6;import React,{useEffect,useState}from\"react\";import styled from\"styled-components\";import{useSelector}from\"react-redux\";import{useHistory}from\"react-router\";import capsuleOpenSmall from\"../assets/capsule-open-small.png\";import capsuleLockedSmall from\"../assets/capsule-locked-small.png\";import capsuleReadySmall from\"../assets/capsule-ready-small.png\";import Button from\"./Button\";import{selectTokens}from\"../state/tokenSlice\";import{getCapsuleUsdValue}from\"../services/oracleService\";import BlockContent from\"./BlockContent\";import Countdown from\"./Countdown\";import{getCanBeOpened}from\"../services/dateHelper\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Content=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  position: relative;\\n  display: flex;\\n  flex-direction: column;\\n  align-items: center;\\n  width: 27rem;\\n\"])));var Dollars=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  color: var(--main);\\n  font-size: 4rem;\\n  font-weight: 500;\\n  margin-bottom: 1rem;\\n  text-align: right;\\n\"])));var Image=styled.img(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  height: 15rem;\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  font-size: 1rem;\\n  color: var(--main);\\n  text-transform: uppercase;\\n  transform: translateX(-1rem);\\n  margin-bottom: 1rem;\\n\"])));var Crypto=styled.div(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n  display: flex;\\n  justify-content: flex-end;\\n  margin-bottom: 1rem;\\n  margin-top: 1rem;\\n\"])));var CyptoIconContainer=styled.div(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\\n  width: 1.3rem;\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n\"])));var CryptoIcon=styled.img(_templateObject6||(_templateObject6=_taggedTemplateLiteral([\"\\n  background-color: white;\\n  border-radius: 50%;\\n  width: 2rem;\\n\"])));var Capsule=function Capsule(props){var history=useHistory();var tokens=useSelector(selectTokens);var _useState=useState(\"$0\"),_useState2=_slicedToArray(_useState,2),usd=_useState2[0],setUsd=_useState2[1];var canBeOpened=getCanBeOpened(props.capsule);var getUsd=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var usdValue;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getCapsuleUsdValue(props.capsule);case 2:usdValue=_context.sent;setUsd(\"$\".concat(Number(usdValue).toFixed(0).toLocaleString()));case 4:case\"end\":return _context.stop();}}},_callee);}));return function getUsd(){return _ref.apply(this,arguments);};}();useEffect(function(){getUsd();},[]);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(BlockContent,{content:/*#__PURE__*/_jsxs(Content,{children:[usd!==\"$0\"&&/*#__PURE__*/_jsx(Dollars,{children:\"\".concat(usd)}),/*#__PURE__*/_jsx(Image,{src:props.capsule.empty?capsuleOpenSmall:!canBeOpened?capsuleLockedSmall:capsuleReadySmall,alt:props.capsule.empty?\"Capsule Empty Image\":!canBeOpened?\"Capsule Locked Image\":\"Capsule Ready Image\"}),/*#__PURE__*/_jsx(Countdown,{capsule:props.capsule,short:true}),/*#__PURE__*/_jsx(Crypto,{children:props.capsule.assets.map(function(asset){var _tokens$filter$,_tokens$filter$2;return/*#__PURE__*/_jsx(CyptoIconContainer,{children:/*#__PURE__*/_jsx(CryptoIcon,{src:(_tokens$filter$=tokens.filter(function(token){return token.address===asset.token;})[0])===null||_tokens$filter$===void 0?void 0:_tokens$filter$.logoURI,alt:\"\".concat((_tokens$filter$2=tokens.filter(function(token){return token.address===asset.token;})[0])===null||_tokens$filter$2===void 0?void 0:_tokens$filter$2.symbol,\" Token Image\")})},asset.token);})}),/*#__PURE__*/_jsx(Button,{click:function click(){return history.push(\"/capsule/\".concat(props.capsule.id));},text:\"View Capsule\"})]}),marginBottom:\"2rem\"})});};export default Capsule;","map":{"version":3,"sources":["/Users/richard/Documents/GitHub/time_sapsule/client/src/components/Capsule.tsx"],"names":["React","useEffect","useState","styled","useSelector","useHistory","capsuleOpenSmall","capsuleLockedSmall","capsuleReadySmall","Button","selectTokens","getCapsuleUsdValue","BlockContent","Countdown","getCanBeOpened","Content","div","Dollars","Image","img","Crypto","CyptoIconContainer","CryptoIcon","Capsule","props","history","tokens","usd","setUsd","canBeOpened","capsule","getUsd","usdValue","Number","toFixed","toLocaleString","empty","assets","map","asset","filter","token","address","logoURI","symbol","push","id"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\nimport styled from \"styled-components\";\nimport countdown from \"countdown\";\nimport { useSelector } from \"react-redux\";\nimport { useHistory } from \"react-router\";\n\nimport capsuleOpenSmall from \"../assets/capsule-open-small.png\";\nimport capsuleLockedSmall from \"../assets/capsule-locked-small.png\";\nimport capsuleReadySmall from \"../assets/capsule-ready-small.png\";\n\nimport Button from \"./Button\";\nimport CapsuleType, { Asset } from \"../types/CapsuleType\";\nimport { selectTokens } from \"../state/tokenSlice\";\nimport Token from \"../types/Token\";\nimport { getCapsuleUsdValue } from \"../services/oracleService\";\nimport BlockContent from \"./BlockContent\";\nimport Countdown from \"./Countdown\";\nimport { getCanBeOpened } from \"../services/dateHelper\";\n\nconst Content = styled.div`\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  width: 27rem;\n`;\n\nconst Dollars = styled.div`\n  color: var(--main);\n  font-size: 4rem;\n  font-weight: 500;\n  margin-bottom: 1rem;\n  text-align: right;\n`;\n\nconst Image = styled.img`\n  height: 15rem;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-size: 1rem;\n  color: var(--main);\n  text-transform: uppercase;\n  transform: translateX(-1rem);\n  margin-bottom: 1rem;\n`;\n\nconst Crypto = styled.div`\n  display: flex;\n  justify-content: flex-end;\n  margin-bottom: 1rem;\n  margin-top: 1rem;\n`;\n\nconst CyptoIconContainer = styled.div`\n  width: 1.3rem;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`;\n\nconst CryptoIcon = styled.img`\n  background-color: white;\n  border-radius: 50%;\n  width: 2rem;\n`;\n\ntype Props = {\n  capsule: CapsuleType;\n};\n\nconst Capsule = (props: Props): JSX.Element => {\n  const history = useHistory();\n\n  const tokens = useSelector(selectTokens);\n\n  const [usd, setUsd] = useState(\"$0\");\n\n  const canBeOpened = getCanBeOpened(props.capsule);\n\n  const getUsd = async () => {\n    const usdValue = await getCapsuleUsdValue(props.capsule);\n    setUsd(`$${Number(usdValue).toFixed(0).toLocaleString()}`);\n  };\n\n  useEffect(() => {\n    getUsd();\n  }, []);\n\n  return (\n    <>\n      <BlockContent\n        content={\n          <Content>\n            {usd !== \"$0\" && <Dollars>{`${usd}`}</Dollars>}\n            <Image\n              src={\n                props.capsule.empty\n                  ? capsuleOpenSmall\n                  : !canBeOpened\n                  ? capsuleLockedSmall\n                  : capsuleReadySmall\n              }\n              alt={\n                props.capsule.empty\n                  ? \"Capsule Empty Image\"\n                  : !canBeOpened\n                  ? \"Capsule Locked Image\"\n                  : \"Capsule Ready Image\"\n              }\n            />\n            <Countdown capsule={props.capsule} short />\n            <Crypto>\n              {props.capsule.assets.map((asset: Asset) => (\n                <CyptoIconContainer key={asset.token}>\n                  <CryptoIcon\n                    src={\n                      tokens.filter(\n                        (token: Token) => token.address === asset.token\n                      )[0]?.logoURI\n                    }\n                    alt={`${\n                      tokens.filter(\n                        (token: Token) => token.address === asset.token\n                      )[0]?.symbol\n                    } Token Image`}\n                  />\n                </CyptoIconContainer>\n              ))}\n            </Crypto>\n            <Button\n              click={() => history.push(`/capsule/${props.capsule.id}`)}\n              text=\"View Capsule\"\n            />\n          </Content>\n        }\n        marginBottom=\"2rem\"\n      />\n    </>\n  );\n};\n\nexport default Capsule;\n"]},"metadata":{},"sourceType":"module"}