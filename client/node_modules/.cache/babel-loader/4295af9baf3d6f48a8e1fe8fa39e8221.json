{"ast":null,"code":"import _regeneratorRuntime from\"/Users/richard/Documents/GitHub/time_capsule/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/richard/Documents/GitHub/time_capsule/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/richard/Documents/GitHub/time_capsule/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/Users/richard/Documents/GitHub/time_capsule/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5;import React,{useEffect,useState}from\"react\";import{useDispatch}from\"react-redux\";import{useParams}from\"react-router\";import styled from\"styled-components\";import{getAddress,getCapsule}from\"../services/contracthelper\";import{setAddress}from\"../state/userSlice\";import noise from\"../assets/noise.png\";import Loading from\"./Loading\";import CapsuleOverview from\"./CapsuleOverview\";import CapsuleDetails from\"./CapsuleDetails\";import CapsuleAssets from\"./CapsuleAssets\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var StyledCapsulePage=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  position: relative;\\n  width: 100%;\\n\"])));var Gradient=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  position: absolute;\\n  top: -13rem;\\n  left: 0;\\n  width: 100%;\\n  height: calc(100% + 13rem + 11rem);\\n  background: linear-gradient(\\n    90deg,\\n    var(--bg),\\n    var(--sub),\\n    var(--bg),\\n    var(--bg)\\n  );\\n  opacity: 0.5;\\n\"])));var Noise=styled.div(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  position: absolute;\\n  top: -13rem;\\n  left: 0;\\n  width: 100%;\\n  height: calc(100% + 13rem + 11rem);\\n  background-image: url(\",\");\\n  background-size: 5px 5px;\\n  opacity: 1;\\n\"])),noise);var CapsulePageContent=styled.div(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n  position: relative;\\n  width: 100%;\\n  display: flex;\\n  min-height: 77vh;\\n  align-items: center;\\n  justify-content: space-evenly;\\n\\n  @media (max-width: 600px) {\\n    flex-direction: column;\\n    margin: 6rem 0;\\n  }\\n\"])));var Details=styled.div(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\\n  display: flex;\\n  align-items: center;\\n  flex-direction: column;\\n\"])));var CapsulePage=function CapsulePage(){var dispatch=useDispatch();var _useParams=useParams(),capsuleId=_useParams.capsuleId;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),capsule=_useState2[0],setCapsule=_useState2[1];var updateCapsule=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.t0=dispatch;_context.t1=setAddress;_context.next=4;return getAddress();case 4:_context.t2=_context.sent;_context.t3=(0,_context.t1)(_context.t2);(0,_context.t0)(_context.t3);_context.t4=setCapsule;_context.next=10;return getCapsule(capsuleId);case 10:_context.t5=_context.sent;(0,_context.t4)(_context.t5);case 12:case\"end\":return _context.stop();}}},_callee);}));return function updateCapsule(){return _ref.apply(this,arguments);};}();useEffect(function(){updateCapsule();window.ethereum.on(\"chainChanged\",/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return updateCapsule();case 2:case\"end\":return _context2.stop();}}},_callee2);})));},[]);return/*#__PURE__*/_jsxs(StyledCapsulePage,{children:[/*#__PURE__*/_jsx(Noise,{}),/*#__PURE__*/_jsx(Gradient,{}),/*#__PURE__*/_jsxs(CapsulePageContent,{children:[!capsule&&/*#__PURE__*/_jsx(Loading,{}),capsule&&/*#__PURE__*/_jsx(CapsuleOverview,{capsule:capsule,update:function update(){return updateCapsule();}}),capsule&&/*#__PURE__*/_jsxs(Details,{children:[/*#__PURE__*/_jsx(CapsuleDetails,{capsule:capsule,update:function update(){return updateCapsule();}}),/*#__PURE__*/_jsx(CapsuleAssets,{capsule:capsule,update:function update(){return updateCapsule();}})]})]})]});};export default CapsulePage;","map":{"version":3,"sources":["/Users/richard/Documents/GitHub/time_capsule/client/src/components/CapsulePage.tsx"],"names":["React","useEffect","useState","useDispatch","useParams","styled","getAddress","getCapsule","setAddress","noise","Loading","CapsuleOverview","CapsuleDetails","CapsuleAssets","StyledCapsulePage","div","Gradient","Noise","CapsulePageContent","Details","CapsulePage","dispatch","capsuleId","capsule","setCapsule","updateCapsule","window","ethereum","on"],"mappings":"6wBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,WAAT,KAA4B,aAA5B,CACA,OAASC,SAAT,KAA0B,cAA1B,CACA,MAAOC,CAAAA,MAAP,KAAmB,mBAAnB,CAEA,OAASC,UAAT,CAAqBC,UAArB,KAAuC,4BAAvC,CACA,OAASC,UAAT,KAA2B,oBAA3B,CAGA,MAAOC,CAAAA,KAAP,KAAkB,qBAAlB,CAEA,MAAOC,CAAAA,OAAP,KAAoB,WAApB,CACA,MAAOC,CAAAA,eAAP,KAA4B,mBAA5B,CACA,MAAOC,CAAAA,cAAP,KAA2B,kBAA3B,CACA,MAAOC,CAAAA,aAAP,KAA0B,iBAA1B,C,wFAEA,GAAMC,CAAAA,iBAAiB,CAAGT,MAAM,CAACU,GAAV,0GAAvB,CAKA,GAAMC,CAAAA,QAAQ,CAAGX,MAAM,CAACU,GAAV,kTAAd,CAgBA,GAAME,CAAAA,KAAK,CAAGZ,MAAM,CAACU,GAAV,0PAMeN,KANf,CAAX,CAWA,GAAMS,CAAAA,kBAAkB,CAAGb,MAAM,CAACU,GAAV,qSAAxB,CAcA,GAAMI,CAAAA,OAAO,CAAGd,MAAM,CAACU,GAAV,0IAAb,CAMA,GAAMK,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAmB,CACrC,GAAMC,CAAAA,QAAQ,CAAGlB,WAAW,EAA5B,CADqC,eAGfC,SAAS,EAHM,CAG7BkB,SAH6B,YAG7BA,SAH6B,eAIPpB,QAAQ,CAAqB,IAArB,CAJD,wCAI9BqB,OAJ8B,eAIrBC,UAJqB,eAMrC,GAAMC,CAAAA,aAAa,0FAAG,+IACpBJ,QADoB,aACXb,UADW,uBACMF,CAAAA,UAAU,EADhB,oHAEpBkB,UAFoB,wBAEHjB,CAAAA,UAAU,CAACe,SAAD,CAFP,uHAAH,kBAAbG,CAAAA,aAAa,0CAAnB,CAKAxB,SAAS,CAAC,UAAM,CACdwB,aAAa,GAEZC,MAAD,CAAgBC,QAAhB,CAAyBC,EAAzB,CAA4B,cAA5B,sEAA4C,+JACpCH,CAAAA,aAAa,EADuB,yDAA5C,IAGD,CANQ,CAMN,EANM,CAAT,CAQA,mBACE,MAAC,iBAAD,yBACE,KAAC,KAAD,IADF,cAEE,KAAC,QAAD,IAFF,cAGE,MAAC,kBAAD,YACG,CAACF,OAAD,eAAY,KAAC,OAAD,IADf,CAEGA,OAAO,eACN,KAAC,eAAD,EAAiB,OAAO,CAAEA,OAA1B,CAAmC,MAAM,CAAE,wBAAME,CAAAA,aAAa,EAAnB,EAA3C,EAHJ,CAKGF,OAAO,eACN,MAAC,OAAD,yBACE,KAAC,cAAD,EAAgB,OAAO,CAAEA,OAAzB,CAAkC,MAAM,CAAE,wBAAME,CAAAA,aAAa,EAAnB,EAA1C,EADF,cAEE,KAAC,aAAD,EAAe,OAAO,CAAEF,OAAxB,CAAiC,MAAM,CAAE,wBAAME,CAAAA,aAAa,EAAnB,EAAzC,EAFF,GANJ,GAHF,GADF,CAkBD,CArCD,CAuCA,cAAeL,CAAAA,WAAf","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { useParams } from \"react-router\";\nimport styled from \"styled-components\";\n\nimport { getAddress, getCapsule } from \"../services/contracthelper\";\nimport { setAddress } from \"../state/userSlice\";\nimport CapsuleType from \"../types/CapsuleType\";\n\nimport noise from \"../assets/noise.png\";\n\nimport Loading from \"./Loading\";\nimport CapsuleOverview from \"./CapsuleOverview\";\nimport CapsuleDetails from \"./CapsuleDetails\";\nimport CapsuleAssets from \"./CapsuleAssets\";\n\nconst StyledCapsulePage = styled.div`\n  position: relative;\n  width: 100%;\n`;\n\nconst Gradient = styled.div`\n  position: absolute;\n  top: -13rem;\n  left: 0;\n  width: 100%;\n  height: calc(100% + 13rem + 11rem);\n  background: linear-gradient(\n    90deg,\n    var(--bg),\n    var(--sub),\n    var(--bg),\n    var(--bg)\n  );\n  opacity: 0.5;\n`;\n\nconst Noise = styled.div`\n  position: absolute;\n  top: -13rem;\n  left: 0;\n  width: 100%;\n  height: calc(100% + 13rem + 11rem);\n  background-image: url(${noise});\n  background-size: 5px 5px;\n  opacity: 1;\n`;\n\nconst CapsulePageContent = styled.div`\n  position: relative;\n  width: 100%;\n  display: flex;\n  min-height: 77vh;\n  align-items: center;\n  justify-content: space-evenly;\n\n  @media (max-width: 600px) {\n    flex-direction: column;\n    margin: 6rem 0;\n  }\n`;\n\nconst Details = styled.div`\n  display: flex;\n  align-items: center;\n  flex-direction: column;\n`;\n\nconst CapsulePage = (): JSX.Element => {\n  const dispatch = useDispatch();\n\n  const { capsuleId } = useParams<any>();\n  const [capsule, setCapsule] = useState<CapsuleType | null>(null);\n\n  const updateCapsule = async () => {\n    dispatch(setAddress(await getAddress()));\n    setCapsule(await getCapsule(capsuleId));\n  };\n\n  useEffect(() => {\n    updateCapsule();\n\n    (window as any).ethereum.on(\"chainChanged\", async () => {\n      await updateCapsule();\n    });\n  }, []);\n\n  return (\n    <StyledCapsulePage>\n      <Noise />\n      <Gradient />\n      <CapsulePageContent>\n        {!capsule && <Loading />}\n        {capsule && (\n          <CapsuleOverview capsule={capsule} update={() => updateCapsule()} />\n        )}\n        {capsule && (\n          <Details>\n            <CapsuleDetails capsule={capsule} update={() => updateCapsule()} />\n            <CapsuleAssets capsule={capsule} update={() => updateCapsule()} />\n          </Details>\n        )}\n      </CapsulePageContent>\n    </StyledCapsulePage>\n  );\n};\n\nexport default CapsulePage;\n"]},"metadata":{},"sourceType":"module"}